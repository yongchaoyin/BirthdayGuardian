<!--pages/profile/profile.wxml-->
<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="profile-header">
    <view class="avatar-section">
      <view class="avatar">
        <text class="avatar-text">{{userInfo.username ? userInfo.username.substring(0,1) : 'å®ˆ'}}</text>
      </view>
      <view class="user-info">
        <text class="username">{{userInfo.username || 'å®ˆæŠ¤è€…'}}</text>
        <text class="user-email">{{userInfo.email || ''}}</text>
      </view>
    </view>

    <!-- ä¼šå‘˜å¡ç‰‡ -->
    <view class="membership-card {{membershipLevel === 'VIP' ? 'vip' : 'free'}}">
      <view class="membership-header">
        <text class="membership-title">{{membershipText}}</text>
        <text class="membership-badge">{{membershipLevel}}</text>
      </view>
      <view class="membership-body">
        <view class="membership-item">
          <text class="item-label">å®ˆæŠ¤åé¢</text>
          <text class="item-value">{{remainingSlots}}/{{maxSlots}}</text>
        </view>
        <view class="membership-item" wx:if="{{membershipLevel === 'VIP'}}">
          <text class="item-label">åˆ°æœŸæ—¶é—´</text>
          <text class="item-value">{{vipExpireDate}}</text>
        </view>
      </view>
      <view class="membership-footer" wx:if="{{membershipLevel === 'FREE'}}">
        <text class="upgrade-text">å‡çº§VIPå¯å®ˆæŠ¤20ä½äº²å‹</text>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½åˆ—è¡¨ -->
  <view class="section">
    <view class="section-title">ä¸ªäººè®¾ç½®</view>
    <view class="menu-list">
      <view class="menu-item" bindtap="handleUpdateUsername">
        <view class="menu-left">
          <text class="menu-icon">ğŸ‘¤</text>
          <text class="menu-text">ä¿®æ”¹ç”¨æˆ·å</text>
        </view>
        <text class="menu-arrow">â€º</text>
      </view>

      <view class="menu-item" bindtap="handleUpdatePhone">
        <view class="menu-left">
          <text class="menu-icon">ğŸ“±</text>
          <text class="menu-text">ç»‘å®šæ‰‹æœºå·</text>
        </view>
        <text class="menu-arrow">â€º</text>
      </view>

      <view class="menu-item" bindtap="handleUpdateEmail">
        <view class="menu-left">
          <text class="menu-icon">ğŸ“§</text>
          <text class="menu-text">ä¿®æ”¹é‚®ç®±</text>
        </view>
        <text class="menu-arrow">â€º</text>
      </view>
    </view>
  </view>

  <!-- å…³äº -->
  <view class="section">
    <view class="section-title">å…³äº</view>
    <view class="menu-list">
      <view class="menu-item" bindtap="handleAbout">
        <view class="menu-left">
          <text class="menu-icon">â„¹ï¸</text>
          <text class="menu-text">å…³äºæˆ‘ä»¬</text>
        </view>
        <text class="menu-arrow">â€º</text>
      </view>

      <view class="menu-item" bindtap="handleContact">
        <view class="menu-left">
          <text class="menu-icon">âœ‰ï¸</text>
          <text class="menu-text">è”ç³»å®¢æœ</text>
        </view>
        <text class="menu-arrow">â€º</text>
      </view>
    </view>
  </view>

  <!-- é€€å‡ºç™»å½• -->
  <view class="logout-section">
    <button class="btn-logout" bindtap="handleLogout">é€€å‡ºç™»å½•</button>
  </view>
</view>
