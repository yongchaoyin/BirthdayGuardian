<!--pages/index/index.wxml-->
<view class="container">
  <!-- å¤´éƒ¨æ¬¢è¿åŒº -->
  <view class="header-section">
    <view class="welcome-card">
      <text class="welcome-title">Hi, {{userInfo.username || 'å®ˆæŠ¤è€…'}}</text>
      <text class="welcome-subtitle">è®©æ¯ä¸ªé‡è¦çš„æ—¥å­éƒ½ä¸è¢«é—å¿˜</text>
    </view>

    <!-- ä¼šå‘˜çŠ¶æ€å¡ç‰‡ -->
    <view class="membership-card">
      <view class="membership-badge {{membershipLevel === 'VIP' ? 'vip' : 'free'}}">
        <text>{{membershipText}}</text>
      </view>
      <view class="membership-info">
        <text class="info-label">å®ˆæŠ¤åé¢</text>
        <text class="info-value">{{remainingSlots}}/{{maxSlots}}</text>
      </view>
      <view class="membership-info" wx:if="{{membershipLevel === 'VIP'}}">
        <text class="info-label">VIPåˆ°æœŸ</text>
        <text class="info-value">{{vipExpireDate}}</text>
      </view>
    </view>
  </view>

  <!-- å³å°†åˆ°æ¥çš„ç”Ÿæ—¥ -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">å³å°†åˆ°æ¥</text>
      <text class="section-more" bindtap="goToBirthdayList">æŸ¥çœ‹å…¨éƒ¨ ></text>
    </view>

    <view class="birthday-list" wx:if="{{upcomingBirthdays.length > 0}}">
      <view class="birthday-item" wx:for="{{upcomingBirthdays}}" wx:key="id">
        <view class="birthday-icon">ğŸ‚</view>
        <view class="birthday-info">
          <text class="birthday-name">{{item.roleName}}</text>
          <text class="birthday-date">{{item.birthDate}} ({{item.calendarTypeText}})</text>
        </view>
        <view class="birthday-countdown">
          <text class="countdown-days">{{item.daysUntil}}</text>
          <text class="countdown-text">å¤©å</text>
        </view>
      </view>
    </view>

    <view class="empty-state" wx:else>
      <text class="empty-icon">ğŸ“…</text>
      <text class="empty-text">æš‚æ— å³å°†åˆ°æ¥çš„ç”Ÿæ—¥</text>
      <button class="btn-primary mt-20" bindtap="goToAddBirthday">æ·»åŠ ç”Ÿæ—¥æé†’</button>
    </view>
  </view>

  <!-- å¿«æ·æ“ä½œ -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">å¿«æ·æ“ä½œ</text>
    </view>
    <view class="action-grid">
      <view class="action-item" bindtap="goToAddBirthday">
        <view class="action-icon">â•</view>
        <text class="action-text">æ·»åŠ ç”Ÿæ—¥</text>
      </view>
      <view class="action-item" bindtap="goToBirthdayList">
        <view class="action-icon">ğŸ“‹</view>
        <text class="action-text">ç®¡ç†åˆ—è¡¨</text>
      </view>
      <view class="action-item" bindtap="goToProfile">
        <view class="action-icon">ğŸ‘¤</view>
        <text class="action-text">ä¸ªäººä¸­å¿ƒ</text>
      </view>
    </view>
  </view>
</view>
