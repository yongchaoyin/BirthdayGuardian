# Web Route Comparison Report

本报告对当前前端路由所对应的页面功能与呈现做了逐一盘点，并对相关数据接口进行交叉说明，方便团队后续验收与扩展。

## 路由概览

| 路径 | 访问要求 | 主要定位 |
|------|----------|----------|
| `/login` | 无需登录 | 登录入口，支持用户名/邮箱 + 密码方式登录 |
| `/register` | 无需登录 | 注册入口，可填写推广码获取奖励 |
| `/home` | 登录用户（非移动端自动跳转） | 桌面端主工作台：守护概览、推广 CTA、公告、角色管理 |
| `/h5` | 登录用户（移动端专用） | 移动端工作台：精简布局 + 角色管理 + 公告 |
| `/profile` | 登录用户 | 个人中心：账户信息、推广任务、资料维护 |
| `/admin` | 登录 + 管理员 | 管理后台：全局统计、用户/公告管理、群发通知 |

> 路由守卫逻辑位于 `frontend/src/router/index.js`，会根据 `localStorage` 中的 `token` 与 `user.role` 进行权限控制；移动端访问 `/home` 会被重定向至 `/h5`。

## 各页面功能明细对比

### `/login`
- **UI/功能要点**：双字段表单（账号、密码）+ 表单校验，支持显示/隐藏密码；成功后按角色跳转 Admin/Home/MobileHome。
- **数据交互**：调用 `POST /api/auth/login`，成功响应写入 `localStorage` (`token` 与完整 `userInfo`)。
- **差异点**：唯一采用 Element Plus `el-form` 验证 + icon 输入。与其他页面相比无业务数据加载流程。

### `/register`
- **UI/功能要点**：四字段（用户名/邮箱/密码/确认密码）+ 推广码输入；推广码校验规则（最大 20、字母数字）；文案提示推广奖励。
- **便捷体验**：若 URL 携带 `?code=XXXX` 自动填充；推广码会在提交前转为大写。
- **数据交互**：调用 `POST /api/auth/register`。后端若推广码匹配成功，会写入邀请关系（见 `UserService.register`）。
- **差异点**：唯一强调推广码的匿名入口页面，与 `/home`、`/profile` 的推广信息相呼应。

### `/home`
- **访问场景**：桌面端主页面。
- **视觉布局**：两列布局（左 2/3 + 右 1/3）。左侧包含欢迎 banner、守护工具栏、规则卡片、推广 CTA、角色表格；右侧公告栏。
- **推广集成**：
  - banner 中动态展示推广奖励（`inviteBonusCount`）。
  - `邀请 CTA` 按钮跳转 `/profile?focus=promo` 并提示当前奖励名额。
- **数据依赖**：
  - `GET /roles` 返回角色列表 + 会员等级 + 推广统计。
  - `GET /user/info` 更新本地 `userInfo`。
  - `GET /announcement/active` 获取公告。
- **差异点**：相比 `/profile` 更偏向日常操作（新增/编辑/删除守护对象）；推广 CTA 与桌面用户的名额提示最完整。

### `/h5`
- **访问场景**：移动端专用工作台。
- **布局**：单列滚动，分为顶部欢迎、会员卡片、公告、角色列表。角色管理、公告展示与 `/home` 功能一致但 UI 精简。
- **推广呈现**：当前版本未加入桌面端那样的推广 CTA（可作为后续增强点）。
- **数据依赖**：同 `/home`，并额外整合微信绑定逻辑 (`getWeChatOauthUrl`、`bindWeChatAccount`)。

### `/profile`
- **功能块**：
  - 用户信息卡（会员状态、名额、VIP 到期等）。
  - **推广任务卡**（新增）：显示推广码、复制按钮、专属注册链接、邀请统计及规则说明。
  - 用户名/手机号修改表单。
  - 修改密码、邮箱模块。
- **交互亮点**：
  - `复制推广码/链接` 使用 Clipboard API + 回退逻辑。
  - 支持通过 `/profile?focus=promo` 自动滚动并高亮推广卡。
- **数据依赖**：`GET /user/info`；修改操作分别调用 `/user/update-username`、`/user/update-phone`、`/user/change-password`、`/user/update-email`。
- **差异点**：推广信息最详细的页面；与 `/home` 营销 CTA 对应。

### `/admin`
- **访问权限**：仅管理员（`user.role === 'admin'`）。
- **主要模块**：
  - 统计卡片（总用户、会员、今日/明日提醒等）。
  - 用户管理（搜索、角色切换、修改会员、禁删自己）。
  - 公告管理 Tab。
  - 群发邮件/短信表单 + 通知趋势图（ECharts）。
- **数据依赖**：多项 API（如 `/api/admin/stats`、`/api/admin/users`、`/api/admin/notifications/...`，详见组件内调用）。
- **差异点**：唯一提供全局运维工具与数据洞察的页面。

## 功能与内容对照总结

| 维度 | `/login` | `/register` | `/home` | `/h5` | `/profile` | `/admin` |
|------|----------|-------------|---------|-------|------------|----------|
| 推广相关 | 登录后跳转 | 填写推广码 | 显示奖励 + CTA | 暂未直接呈现 | 详细展示、复制 | 查看用户推广奖励（间接） |
| 守护管理 | — | — | 桌面表格增删改 | 卡片式增删改 | 显示名额，不管理角色 | 管理全部用户 |
| 公告展示 | — | — | 右侧公告栏 | 公告列表 | — | 公告管理 Tab |
| 账户维护 | — | 注册 | — | — | 用户名/邮箱/密码/手机号 | 管理他人权限/会员 |
| 终端侧重 | 通用 | 通用 | 桌面 | 移动 | 通用 | 桌面运营 |

## 数据接口交叉

- **认证**：`POST /api/auth/login`、`POST /api/auth/register`。
- **用户信息**：`GET /api/user/info` 用于 `/home`、`/h5`、`/profile`；通过写入 `localStorage` 维持路由守卫状态。
- **推广统计**：
  - 注册时 `UserService.register` 根据推广码累加邀请成功数 + 生成唯一推广码。
  - `/roles` 接口返回 `inviteSuccessCount`、`inviteBonus` 等给首页消费。
  - `/profile` 直接从 `/user/info` 读取并展示。
- **公告数据**：`/api/announcement/active` 供用户端；管理员通过 `/api/admin/announcements` 管理。

## 发现与建议

1. **推广体验一致性**：移动端 `/h5` 尚未显示推广 CTA，可考虑复用桌面逻辑或在个人中心突出提示。
2. **路由提示**：在登录成功后若检测 `inviteSuccessCount` 新增，可在 `/home` 弹出成功提示，增强激励效果。
3. **文档同步**：本报告建议收录至项目文档目录 `docs/url-comparison-report.md`（已生成）。更新推广规则后记得同步该文档。

