import{_ as P,r as x,a as y,c as E,o as b,b as s,w as a,d as n,u as k,e as p,f as m,E as u}from"./index-BLLjHX9z.js";import{r as U}from"./auth-BO-9wJ8L.js";import"./request-Eu6Wjmw7.js";const q={class:"register-container"},R={class:"link"},B={__name:"Register",setup(C){const f=k(),d=x(null),r=y({username:"",email:"",password:"",confirmPassword:""}),g={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:50,message:"用户名长度在3-50之间",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],password:[{required:!0,validator:(t,e,o)=>{e===""?o(new Error("请输入密码")):e.length<6||e.length>20?o(new Error("密码长度在6-20之间")):(r.confirmPassword!==""&&d.value.validateField("confirmPassword"),o())},trigger:"blur"}],confirmPassword:[{required:!0,validator:(t,e,o)=>{e===""?o(new Error("请再次输入密码")):e!==r.password?o(new Error("两次输入密码不一致")):o()},trigger:"blur"}]},c=async()=>{try{await d.value.validate(),await U({username:r.username,email:r.email,password:r.password}),u.success("注册成功，请登录"),f.push("/login")}catch(t){t.response?u.error(t.response.data.message||"注册失败"):t.message&&u.error(t.message)}};return(t,e)=>{const o=n("el-input"),i=n("el-form-item"),w=n("el-button"),_=n("el-form"),V=n("router-link"),v=n("el-card");return b(),E("div",q,[s(v,{class:"register-card"},{default:a(()=>[e[7]||(e[7]=p("h2",{class:"title"},"生日守护者 - 注册",-1)),s(_,{model:r,rules:g,ref_key:"registerForm",ref:d},{default:a(()=>[s(i,{prop:"username"},{default:a(()=>[s(o,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=l=>r.username=l),placeholder:"用户名","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),s(i,{prop:"email"},{default:a(()=>[s(o,{modelValue:r.email,"onUpdate:modelValue":e[1]||(e[1]=l=>r.email=l),placeholder:"邮箱","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),s(i,{prop:"password"},{default:a(()=>[s(o,{modelValue:r.password,"onUpdate:modelValue":e[2]||(e[2]=l=>r.password=l),type:"password",placeholder:"密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(i,{prop:"confirmPassword"},{default:a(()=>[s(o,{modelValue:r.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=l=>r.confirmPassword=l),type:"password",placeholder:"确认密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(i,null,{default:a(()=>[s(w,{type:"primary",onClick:c,style:{width:"100%"}},{default:a(()=>[...e[4]||(e[4]=[m(" 注册 ",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),p("div",R,[e[6]||(e[6]=m(" 已有账号？",-1)),s(V,{to:"/login"},{default:a(()=>[...e[5]||(e[5]=[m("立即登录",-1)])]),_:1})])]),_:1})])}}},I=P(B,[["__scopeId","data-v-a2ac5c21"]]);export{I as default};
